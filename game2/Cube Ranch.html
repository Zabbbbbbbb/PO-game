<!DOCTYPE html>
<html>
  <head>
    <title>Cube ranch</title>
    <!--<link rel="icon" href="new.png" type="image/png" sizes="32x32">-->
    <!-- commentaar html -->
    <style>
        html, body {
            overflow: hidden;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #404040;
        }

        .hidden {
            display: none !important;
            pointer-events: none !important;
        }

        .slime-menu {
            position: absolute;
            background-color: #303030;
            border: 1px solid #FFFFFF;
            border-radius: 8px;
            padding: 5px 0;
            width: 15%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .slime-menu div {
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            transition: background 0.2s;
        }

        .slime-menu div:hover {
            background-color: #404040;
        }

        .farm{
            position: absolute;
            left: 5%;
            top: 5%;
            width: 90%;
            height: 90%;
            background-color: #303030;
            border: 1px solid black;
        }
        .child_vB{
            position: absolute;
            left: 10%;
            bottom: 0%;
            height: 10%;
            border: 0.5px solid black;
            aspect-ratio: 1/1;
        }
        .child_v1{
            border-radius: 0%;
        }
        .child_v2{
            border-radius: 12.5%;
        }
        .child_v3{
            border-radius: 25%;
        }
        .child_v4{
            border-top-left-radius: 50%;
            border-top-right-radius: 50%;
            border-bottom-left-radius: 25%;
            border-bottom-right-radius: 25%;
        }
        .child_v5{
            border-radius: 50%;
        }
        .adult_vB{
            opacity: 1;
            position: absolute;
            left: 10%;
            bottom: 0%;
            height: 15%;
            border: 0.5px solid black;
            aspect-ratio: 1/1;
        }
        .adult_v1{
            border-radius: 0%;
        }
        .adult_v2{
            border-radius: 12.5%;
        }
        .adult_v3{
            border-radius: 25%;
        }
        .adult_v4{
            border-top-left-radius: 50%;
            border-top-right-radius: 50%;
            border-bottom-left-radius: 25%;
            border-bottom-right-radius: 25%;
        }
        .adult_v5{
            border-radius: 50%;
        }
        .eye_vB{
            position: absolute;
            bottom: 37.5%;
            background-color: white;
            height: 25%;
            border: 0.5px solid black;
            aspect-ratio: 1/1;
            border-radius: 50%;
        }
        .eye_v1{
            left: 35.5%;
        }
        .eye_v2{
            left: 10%;
        }
        .eye_v3{
            right: 10%;
        }
        .pupil_vB{
            position: absolute;
            bottom: 25%;
            background-color: black;
            height: 50%;
            aspect-ratio: 1/1;
            border-radius: 50%;
        }
        .pupil_v1{
            left: 25%;
        }
        .pupil_v2{
            left: 10%;
        }
        .pupil_v3{
            right: 10%;
        }

        .slime_tag{
            position: absolute;
            width: auto;
            height: auto;
            color: #FFFFFF;
            text-shadow: 2px 0 #000000, -2px 0 #000000, 0 2px #000000, 0 -2px #000000, 1px 1px #000000, -1px -1px #000000, 1px -1px #000000, -1px 1px #000000;
            font-size: 3vh;
            z-index: 10;
            text-align: center;
        }

        .breeding_place{
            position: absolute;
            width: 25%;
            height: 25%;
            background-color: #404040;
        }
        .spot1{
            position: absolute;
            left: 10%;
            width: 30%;
            height: 80%;
            top: 10%;
            border-style:dashed;
            border-width: 2px;
            border-color: #000000;
            background-color: #505050;
            cursor:pointer;
        }
        .spot2{
            position: absolute;
            right: 10%;
            width: 30%;
            height: 80%;
            top: 10%;
            border-style: dashed;
            border-width: 2px;
            border-color: #000000;
            background-color: #505050;
            cursor:pointer;
        }

        .saved{
            position: absolute;
            left: 35%;
            top: 0%;
            width: 30%;
            height: 25%;
            background-color: #404040;
        }
        .saved_slot{
            position: absolute;
            top: 10%;
            border-style: dashed;
            border-width: 2px;
            border-color: #000000;
            background-color: #505050;
            width: 15%;
            height: 30%;
            cursor:pointer;
            display: flex;
            justify-content:center;
        }
        .saved_slot1{
            left: 5%;
            top: 10%;
        }
        .saved_slot2{
            left: 30%;
            top: 10%;
        }
        .saved_slot3{
            left: 55%;
            top: 10%;
        }
        .saved_slot4{
            left: 80%;
            top: 10%;
        }
        .saved_slot5{
            left: 5%;
            top: 55%;
        }
        .saved_slot6{
            left: 30%;
            top: 55%;
        }
        .saved_slot7{
            left: 55%;
            top: 55%;
        }
        .saved_slot8{
            left: 80%;
            top: 55%;
        }


        .heart {
            position: absolute;
            width: 10%;
            aspect-ratio: 1 / 1;
            left: 45%;
            top: 45%;
            background: #C00000;
            transform: rotate(-45deg);
        }

        .heart::before,
        .heart::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            background: #C00000;
            border-radius: 50%;
        }

        .heart::before {
            top: -50%;
            left: 0;
        }

        .heart::after {
            left: 50%;
            top: 0;
        }

        .mission_menu{
            position: absolute;
            width: 25%;
            height: 25%;
            right: 0%;
            background-color: #404040;
        }

        .mission{
            position: absolute;
            width: 75%;
            height: 25%;
            left: 25%;
            top:2.5%;
            /*background-color: #800000;*/
            text-align: center;
            color: white;
            font-size: 2vh;
            display: flex;
            justify-content: center;
            align-items:center;
        }
        .goal{
            position: absolute;
            top: 30%;
            width: 75%;
            height: 70%;
            left: 25%;
            /*background-color: #008000;*/
            display:flex;
            justify-content:center;
        }
        .goal_slot{
            position: relative;
            width: 50%;
            height: 97%;
            top: 0%;
            border-style: dashed;
            border-width: 2px;
            border-color: #000000;
            background-color: #505050;
            cursor:pointer;
            display: flex;
            justify-content:center;
        }

        .buttons{
            position: absolute;
            width: 25%;
            height: 100%;
            /*background-color: #000080;*/
        }
        .buttony{
            width: 100%;
            height: 25%;
            background-color: #606060;
            color: white;
            font-size: 2vh;
        }

        .succes{
            position: absolute;
            width: 100%;
            height: 20%;
            background-color: black;
            top: 40%;
            color: #C0C000;
            font-size: 15vh;
            text-align:center;
        }
    </style>
  </head>
  <body>
    <div class="farm">
        <div id="menu" class="slime-menu hidden">
            <div data-action="1" class="all">Kill slime</div>
            <div data-action="2" class="all">Change name</div>
            <div data-action="3" class="all">Check stats</div>
        </div>
        <div class="slime_tag hidden">Name of the slime</div>
        <div class="breeding_place">
            <div class="heart"></div>
            <div class="spot1"></div>
            <div class="spot2"></div>
        </div>
        <div class="saved">
            <div class="saved_slot1 saved_slot" onclick="spawn(this, saveslot1_content)" oncontextmenu="save(1); return false;"></div>
            <div class="saved_slot2 saved_slot" onclick="spawn(this, saveslot2_content)" oncontextmenu="save(2); return false;"></div>
            <div class="saved_slot3 saved_slot" onclick="spawn(this, saveslot3_content)" oncontextmenu="save(3); return false;"></div>
            <div class="saved_slot4 saved_slot" onclick="spawn(this, saveslot4_content)" oncontextmenu="save(4); return false;"></div>

            <div class="saved_slot5 saved_slot" onclick="spawn(this, saveslot5_content)" oncontextmenu="save(5); return false;"></div>
            <div class="saved_slot6 saved_slot" onclick="spawn(this, saveslot6_content)" oncontextmenu="save(6); return false;"></div>
            <div class="saved_slot7 saved_slot" onclick="spawn(this, saveslot7_content)" oncontextmenu="save(7); return false;"></div>
            <div class="saved_slot8 saved_slot" onclick="spawn(this, saveslot8_content)" oncontextmenu="save(8); return false;"></div>
        </div>
        <div class="mission_menu">
            <div class="mission">
                Next mission:<br>Cube, Salmon red (#FF8080)
            </div>
            <div class="goal">
                <div class="goal_slot"></div>
            </div>
            <div class="buttons">
                <button class="buttony" onclick='add_slime(true, "adult_v4", "#FF0000", "", "");add_slime(true, "adult_v1", "#00FF00", "", "");add_slime(true, "adult_v4", "#0000FF", "", "");add_slime(true, "adult_v1", "#FFFFFF", "", "");add_slime(true, "adult_v4", "#000000", "", "");add_slime(true, "adult_v1", "#FFFF00", "", "");add_slime(true, "adult_v4", "#FF00FF", "", "");add_slime(true, "adult_v1", "#00FFFF", "", "");''>add prime colors</button>
                <button class="buttony" onclick="delete_every_slime()">kill all</button>
                <button class="buttony" onclick="remove_saved()">empty saved</button>
                <button class="buttony" style="height:12.5%;">difficulty:</button>
                <button class="buttony dif" onclick="setdifficulty(1)" style="height:12.5%;width:21%;margin:0;padding:0;color:#FFFFFF;">1</button>
                <button class="buttony dif" onclick="setdifficulty(2)" style="height:12.5%;width:21%;margin:0;padding:0;color:#808080;">2</button>
                <button class="buttony dif" onclick="setdifficulty(3)" style="height:12.5%;width:21%;margin:0;padding:0;color:#808080;">3</button>
                <button class="buttony dif" onclick="setdifficulty(4)" style="height:12.5%;width:21%;margin:0;padding:0;color:#808080;">4</button>
            </div>
        </div>
        <div class="succes hidden">
            SUCCES
        </div>
    </div>

    <script>
        let color_dict = {
            //primary colors:
            "white": "#FFFFFF",
            "black": "#000000",
            "red": "#FF0000",
            "green": "#00FF00",
            "blue": "#0000FF",
            "yellow": "#FFFF00",
            "cyan": "#00FFFF",
            "magenta": "#FF00FF",

            //secondairy colors:
            "gray": "#808080",
            "salmon pink": "#FF8080",
            "lime": "#80FF80",
            "light blue": "#8080FF",
            "light yellow": "#FFFF80",
            "sky blue": "#80FFFF",
            "light magenta": "#FF80FF",

            "maroon red": "#800000",
            "forest green": "#008000",
            "navy blue": "#000080",
            "olive": "#808000",
            "teal": "#008080",
            "purple": "#800080",

            "orange": "#FF8000",
            "hot pink": "#FF0080",
            "chartreuse": "#80FF00",
            "mint": "#00FF80",
            "azure": "#0080FF",
            "violet": "#8000FF",

            //thirtiary colors:
            //white + secundary colors:
            "light gray": "#C0C0C0",
            "pale pink": "#FFC0C0",
            "pale green": "#C0FFC0",
            "pale blue": "#C0C0FF",
            "pale yellow": "#FFFFC0", //also possible: parchment
            "pale cyan": "#C0FFFF",
            "pale magenta": "#FFC0FF",
            "muted pink": "#C08080", //also possible: terracotta pink
            "light muted green": "#80C080",
            "muted blue": "#8080C0",
            "light olive": "#C0C080",
            "light teal": "#80C0C0",
            "lavender": "#C080C0",
            "light orange": "#FFC080",
            "pink": "#FF80C0",
            "warm light mint": "#C0FF80",
            "light azure": "#80C0FF",
            "very light violet": "#C080FF",

            //black + secundary colors:
            "dark gray": "#404040",
            "deep pink": "#804040",
            "sage green": "#408040",
            "denim": "#404080",
            "soft olive": "#808040",
            "dark lavender": "#804080",
            "deep red": "#400000",
            "deep green": "#004000",
            "deep blue": "#000040",
            "dark olive": "#404000",
            "dark teal": "#004040",
            "dark purple": "#400040",
            "brown": "#804000",
            "dark pink": "#800040",
            "dark chartreuse": "#408000",
            "dark mint": "#008040",
            "blueberry": "#004080",
            "indigo": "#400080",

            //red + secondary colors:
            "muted red": "#C04040",
            "light red": "#FF4040",
            "light brown": "#C08040",
            "muted magenta": "#C04080",
            "tangerine": "#FF8040",
            "muted hot pink": "#FF4080",
            "crimson": "#C00000",
            "rust": "#C04000",
            "cardinal red": "#C00040",
            "orange red": "#FF4000",
            "carmine red": "#FF0040",
            "marigold ray": "#C08000",
            "purple anxiety": "#C00080",

            //green + secondary colors:
            "dark muted green": "#40C040",
            "avocado green": "#80C040",
            "light green": "#40FF40",
            "aquamarine": "#40C080",
            "kiwi green": "#80FF40",
            "light mint": "#40FF80",
            "Bilbao": "#4080FF",
            "grass green": "#00C000",
            "warm grass green": "#40C000",
            "cold grass green": "#00C040",
            "cactus green": "#80C000",
            "off-green": "#40FF00",
            "cold green": "#00FF40",
            "muted mint": "#00C080",
            "soft teal": "#408080",

            //blue + secondary colors:
            "blue denim": "#4040C0", //from gray
            "dark orchid": "#8040C0", //from salmon pink
            "cold muted blue": "#4080C0", //from lime
            "medium light blue": "#4040FF",//from sapphire
            "light violet": "#8040FF", //from light magenta
            "sapphire": "#0000C0", //from navy
            "cobalt": "#0040C0", //from teal
            "strong violet": "#4000C0", //from purple
            "cold violet": "#8000C0", //from hot pink
            "cerulean": "#0080C0", //from mint
            "lapis": "#0040FF", //from azure
            "han purple": "#4000FF", //from violet

            //yellow + secondary colors:
            "moderate yellow": "#C0C040", //from gray
            "marigold": "#FFC040", //from salmon pink
            "pale chartreuse": "#C0FF40", //from lime
            "paris daisy": "#FFFF40", //from light yellow
            "dark goldenrod": "#C08000", //from maroon
            "gold": "#C0C000", //from olive
            "amber": "#FFC000", //from orange
            "electric lime": "#C0FF00", //from chartreuse

            //cyan + secondary colors:
            "medium turquoise": "#40C0C0", //from gray
            "cold mint": "#40FFC0", //from mint
            "light cerulean": "#40C0FF", //from light blue
            "cold light mint": "#80FFC0", //from light yellow
            "off-cyan": "#40FFFF", //from sky blue
            "robins egg blue": "#00C0C0", //from teal
            "mint cyan": "#20FFC0", //from mint
            "capri": "#00C0FF", //from azure

            //magenta + secondary colors:
            "dark magenta": "#C040C0", //from gray
            "barbie pink": "#FF40C0", //from salmon pink
            "medium light violet": "#C040FF", //from light blue
            "off-magenta": "#FF40FF", //from light magenta
            "light purple": "#C000C0", //from purple
            "hot magenta": "#FF00C0", //from hot pink
            "electric purple": "#C000FF" //from violet

        }
        let farm = document.querySelector(".farm");
        let jump_at_same_time = false;
        let gameloop_active = true;
        let slime_tag = document.querySelector(".slime_tag");
        let mission_level = 0;
        farm.querySelectorAll(".child_vB").forEach(item => {
            item.remove();
        });

        //randomnumber between x and y (including x and y):
        function RNr(x, y){
            return (x + Math.floor(Math.random() * (y - x + 1))); //for example: x=1 and y=3 could give 1, 2 and 3 as valid responses
        }

        //convert number to prime color:
        function randomprimecolor(nr){
            if(nr == 1){
                return "#FF0000";
            }
            else if(nr == 2){
                return "#00FF00";
            }
            else{
                return "#0000FF";
            }
        }

        farm.addEventListener("click", item => {
            if(gameloop_active && !saving){
                if(item.target.closest(".slime")){
                    slime_menu(item.target.id);
                }
                else{
                    menu.classList.add("hidden");
                }
            }
            else if(busy_breeding){
                if(slot1_empty && item.target.closest(".slime")){
                    if(item.target.classList.contains("adult_vB")){
                        fillslot(1, item.target);
                    }
                }
                else if(slot2_empty && item.target.closest(".slime")){
                    if(item.target.classList.contains("adult_vB")){
                        fillslot(2, item.target);
                    }
                }
            }
            else if(missioning){
                if(item.target.closest(".slime")){
                    if(item.target.classList.contains("adult_vB")){
                        enterslime(item.target);
                    }
                }
            }
        })

        let currentslime = 0;
        let menu = farm.querySelector('.slime-menu');
        menu.addEventListener("click", function(event) {
            let action = event.target.dataset.action;
            if(!action){
                return;
            }

            if(action == "1"){
                delete_slime(currentslime);
            }
            else if(action == "2"){
                let newname = prompt('insert name for slime', document.getElementById(currentslime).name);
                if(newname != "" && newname != null){
                    document.getElementById(currentslime).name = newname;
                    let NR = slime_id_list.indexOf(currentslime);
                }
            }
        });
        function slime_menu(slime){
            currentslime = slime;
            menu.style.top = (event.pageY - farm.offsetHeight * 0.15) + "px";
            menu.style.left = (event.pageX - farm.offsetWidth * 0.05) + "px";
            menu.classList.remove("hidden");
        }

        let slime_id_list = [];
        let slime_color_list = [];
        function delete_slime(slime){//zeb
            document.getElementById(slime).remove();
            let NR = slime_id_list.indexOf(slime);
            slime_id_list.splice(NR, 1);
            slime_color_list.splice(NR, 1);

            for(let x = 0; x < slime_id_list.length; x++){
                if(document.getElementsByClassName("slime")[x].id == document.getElementsByClassName("slime")[x].name){
                    document.getElementsByClassName("slime")[x].name = x + 1;
                }
                document.getElementsByClassName("slime")[x].id = x + 1;
                slime_id_list[x] = x + 1;
            }
        }
        function delete_every_slime() {
            for(let x = slime_id_list.length - 1; x >= 0; x--){
                delete_slime(slime_id_list[x]);
            }
        }

        function add_slime(adult, body_type, color, p_left, p_top){
            let slime_body = document.createElement('div');
            slime_body.id = slime_id_list.length + 1;
            slime_body.name = slime_body.id;
            //slime_body.style.opacity = RNr(75, 90)/100;
            if(!adult){
                slime_body.classList.add("child_vB");
            }
            else{
                slime_body.classList.add("adult_vB");
            }
            slime_body.style.backgroundColor = color;
            slime_body.classList.add("slime");
            slime_body.classList.add(body_type);
            slime_body.addEventListener("mousemove", (event) => {
                let [a, b, c] = parseColor(slime_body.style.backgroundColor);
                let colory = `(#${toHex(a)}${toHex(b)}${toHex(c)})`
                slime_tag.innerHTML = `${slime_body.name}<br>${colory}`;
                slime_tag.classList.remove("hidden");
                slime_tag.style.top = (event.pageY - farm.offsetHeight * 0.055) + "px";
                slime_tag.style.left = (event.pageX - farm.offsetWidth * 0.04) + "px";
            });
            slime_body.addEventListener("mouseout", (event) => {
                slime_tag.classList.add("hidden");
            });

            slime_body.addEventListener("click", (event) => {
                if(saving && slime_body.classList.contains("adult_vB")){
                    save_slime(slime_body, saveslot_content);
                }
            });

            if(p_left == ""){
                slime_body.style.left = (RNr(0, 900)/10).toString() + "%";
            }
            else{
                slime_body.style.left = p_left + "px";
                slime_body.style.top = p_top + "px";
            }
            farm.appendChild(slime_body);

            let slime_eye = document.createElement('div');
            slime_eye.classList.add("eye_vB");
            slime_eye.classList.add("eye_v1");
            slime_body.appendChild(slime_eye);

            let slime_pupil = document.createElement('div');
            slime_pupil.classList.add("pupil_vB");
            slime_pupil.classList.add("pupil_v1");
            slime_eye.appendChild(slime_pupil);

            slime_id_list.push(slime_body.id);
            slime_color_list.push(slime_body.style.backgroundColor);
        }

        add_slime(true, "adult_v4", "#FF0000", "", "");
        add_slime(true, "adult_v1", "#00FF00", "", "");
        add_slime(true, "adult_v4", "#0000FF", "", "");
        add_slime(true, "adult_v1", "#FFFFFF", "", "");
        add_slime(true, "adult_v4", "#000000", "", "");
        add_slime(true, "adult_v1", "#FFFF00", "", "");
        add_slime(true, "adult_v4", "#FF00FF", "", "");
        add_slime(true, "adult_v1", "#00FFFF", "", "");

        async function gameloop(){
            if(gameloop_active){
                for(let x = 0; x < slime_id_list.length; x++){
                    document.getElementById(slime_id_list[x]).style.bottom = 0;
                    if(!jump_at_same_time){await new Promise(r => setTimeout(r, time_unit / 10));}
                        if(document.getElementById(slime_id_list[x]).classList.contains("child_vB")){
                            let chance_to_age = RNr(1, 5);
                            if(chance_to_age == 1){
                                document.getElementById(slime_id_list[x]).classList.remove("child_vB");
                                document.getElementById(slime_id_list[x]).classList.add("adult_vB");
                                if(document.getElementById(slime_id_list[x]).classList.contains("child_v1")){
                                    document.getElementById(slime_id_list[x]).classList.remove("child_v1")
                                    document.getElementById(slime_id_list[x]).classList.add("adult_v1");
                                }
                                else if(document.getElementById(slime_id_list[x]).classList.contains("child_v2")){
                                    document.getElementById(slime_id_list[x]).classList.remove("child_v2")
                                    document.getElementById(slime_id_list[x]).classList.add("adult_v2");
                                }
                                else if(document.getElementById(slime_id_list[x]).classList.contains("child_v3")){
                                    document.getElementById(slime_id_list[x]).classList.remove("child_v3")
                                    document.getElementById(slime_id_list[x]).classList.add("adult_v3");
                                }
                                else if(document.getElementById(slime_id_list[x]).classList.contains("child_v4")){
                                    document.getElementById(slime_id_list[x]).classList.remove("child_v4")
                                    document.getElementById(slime_id_list[x]).classList.add("adult_v4");
                                }
                                else if(document.getElementById(slime_id_list[x]).classList.contains("child_v5")){
                                    document.getElementById(slime_id_list[x]).classList.remove("child_v5")
                                    document.getElementById(slime_id_list[x]).classList.add("adult_v5");
                                }
                            }
                        }
                        let dosomething = RNr(1, 2);
                        if(dosomething == 1){
                            let side = RNr(1, 2);
                            let slime = document.getElementById(slime_id_list[x]);
                            let eye = slime.querySelector(".eye_vB");
                            let pupil = eye.querySelector(".pupil_vB");
                            if(side == 1 && slime.offsetLeft > farm.offsetWidth * 0.1){
                                eye.classList.remove("eye_v1");
                                eye.classList.add("eye_v2");
                                pupil.classList.remove("pupil_v1");
                                pupil.classList.add("pupil_v2");

                                jump(slime, (-farm.offsetWidth * (RNr(5, 10)/100)), farm.offsetHeight * 0.2, time_unit);
                                
                                center(slime);
                            }
                            else if(slime.offsetLeft < farm.offsetWidth * 0.8){
                                eye.classList.remove("eye_v1");
                                eye.classList.add("eye_v3");
                                pupil.classList.remove("pupil_v1");
                                pupil.classList.add("pupil_v3");

                                jump(slime, (farm.offsetWidth * (RNr(5, 10)/100)), farm.offsetHeight * 0.2, time_unit);
                                
                                center(slime);
                            }
                        }
                }
            }
        }

        async function center(slime){
            setTimeout(() => {
                let eye = slime.querySelector(".eye_vB");
                let pupil = eye.querySelector(".pupil_vB");

                eye.classList.remove("eye_v2");
                eye.classList.remove("eye_v3");
                eye.classList.add("eye_v1");
                pupil.classList.remove("pupil_v2");
                pupil.classList.remove("pupil_v3");
                pupil.classList.add("pupil_v1");
            }, time_unit * (RNr(10, 19) / 10));
        }

        function jump(slime, distance, height, duration) {
            if(gameloop_active){
                slime.style.bottom = "0%";
                slime.style.top = ""; // clear top so bottom wins

                let startX = slime.offsetLeft;
                let startY = slime.offsetTop;

                let startTime = performance.now();

                function animate(time) {
                    let t = Math.min((time - startTime) / duration, 1);

                    // X moves linearly
                    let x = startX + distance * t;

                    // Y follows a parabola (0 -> 1 -> 0)
                    let y = startY - height * 4 * t * (1 - t);

                    slime.style.left = x + "px";
                    slime.style.top = y + "px";

                    if (t < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        slime.style.bottom = "0%";
                        slime.style.top = ""; // clear top so bottom wins
                    }
                }

                requestAnimationFrame(animate);
            }
        }

        //breeding:
        document.querySelector(".spot1").addEventListener("click", ()=>{
            if(gameloop_active == true && slot1_empty && slot2_empty){
                breeding();
            }
            else{
                cancel_breeding();
            }
        });
        document.querySelector(".spot2").addEventListener("click", ()=>{
            if(gameloop_active == true){
                breeding();
            }
            else{
                cancel_breeding();
            }
        });
        let busy_breeding = false;
        let saving = false;
        let slot1_empty = true;
        let slot2_empty = true;
        function breeding(){
            gameloop_active = false;
            busy_breeding = true;
            for(let x = 0; x < slime_id_list.length; x++){
                let slime = document.getElementById(slime_id_list[x]);
                if(slime.classList.contains("adult_vB")){
                    let available = document.createElement("p");
                    available.classList.add("temp");
                    available.textContent = "!";
                    available.style.fontSize = "5vh";
                    available.style.position = "absolute";
                    available.style.top = "-70%";//(slime.offsetTop - (0.10 * farm.offsetHeight)) + "px";
                    available.style.left = "43%";//(slime.offsetLeft + slime.offsetWidth * 0.45 - available.offsetWidth) + "px";
                    available.style.color = "#FFFFFF";
                    available.style.textShadow = "2px 0 #000000, -2px 0 #000000, 0 2px #000000, 0 -2px #000000, 1px 1px #000000, -1px -1px #000000, 1px -1px #000000, -1px 1px #000000";
                    available.style.zIndex = slime.style.zIndex;
                    available.id = `available_${slime.id}`;
                    slime.appendChild(available);
                }
            }
        }
        function cancel_breeding(){
            slot1_empty = true;
            slot2_empty = true;
            busy_breeding = false;
            document.querySelectorAll(".temp").forEach(item =>{
                item.remove();
            })
            gameloop_active = true;
        }
        let slot1_filling = "";
        let slot2_filling = "";
        function fillslot(slotNR, slime){
            if(slotNR == 1){
                document.querySelectorAll(".temp").forEach(item =>{
                    if(item.id == `available_${slime.id}`){
                        item.remove();
                    }
                });
                slot1_empty = false;
                slot1_filling = slime.id;
                slime.style.bottom = "";
                slime.style.top = (document.querySelector(".spot1").offsetTop + document.querySelector(".spot1").offsetHeight * 0.5 - slime.offsetHeight * 0.5) + "px";
                slime.style.left = (document.querySelector(".spot1").offsetLeft + document.querySelector(".spot1").offsetWidth * 0.5 - slime.offsetWidth * 0.5) + "px";
            }
            else if(slotNR == 2 && !(slot1_filling == slime.id)){
                document.querySelectorAll(".temp").forEach(item =>{
                    if(item.id == `available_${slime.id}`){
                        item.remove();
                    }
                });
                slot2_empty = false;
                slot2_filling = slime.id;
                slime.style.bottom = "";
                slime.style.top = (document.querySelector(".spot2").offsetTop + document.querySelector(".spot2").offsetHeight * 0.5 - slime.offsetHeight * 0.5) + "px";
                slime.style.left = (document.querySelector(".spot2").offsetLeft + document.querySelector(".spot2").offsetWidth * 0.5 - slime.offsetWidth * 0.5) + "px";
 
                let temp = document.createElement("div");
                temp.classList.add("child_vB");
                document.body.appendChild(temp);
                let tempWidth = temp.offsetWidth;
                let tempHeight = temp.offsetHeight;
                document.body.removeChild(temp);
                
                let newbodytype = determine_body_type();
                let newcolor = determine_color_type();
                
                let newleft = document.querySelector(".breeding_place").offsetLeft + document.querySelector(".breeding_place").offsetWidth * 0.5 - tempWidth * 0.5;
                let newtop = document.querySelector(".breeding_place").offsetTop + document.querySelector(".breeding_place").offsetHeight * 0.5 - tempHeight * 0.5;

                add_slime(false, newbodytype, newcolor, newleft, newtop);

                slot1_empty = true;
                slot2_empty = true;
                gameloop_active = true;
                busy_breeding = false;

                document.querySelectorAll(".temp").forEach(item =>{
                    item.remove();
                });
            }
        }

        function determine_body_type(){
            newbodytype = "child_v1";
            parent1 = document.getElementById(slot1_filling);
            parent2 = document.getElementById(slot2_filling);
            let parent1type = "AAA";
            let parent2type = "BBB";

            if(parent1.classList.contains("adult_v1")){
                parent1type = "v1";
            } else if(parent1.classList.contains("adult_v2")){
                parent1type = "v2";
            } else if(parent1.classList.contains("adult_v3")){
                parent1type = "v3";
            } else if(parent1.classList.contains("adult_v4")){
                parent1type = "v4";
            } else if(parent1.classList.contains("adult_v5")){
                parent1type = "v5";
            }

            if(parent2.classList.contains("adult_v1")){
                parent2type = "v1";
            } else if(parent2.classList.contains("adult_v2")){
                parent2type = "v2";
            } else if(parent2.classList.contains("adult_v3")){
                parent2type = "v3";
            } else if(parent2.classList.contains("adult_v4")){
                parent2type = "v4";
            } else if(parent2.classList.contains("adult_v5")){
                parent2type = "v5";
            }

            if(parent1type == "v4" && parent2type == "v4"){
                let randomnr1 = RNr(1, 4);
                if(randomnr1 == 4){
                    return `child_v5`;
                }
                else{
                    return `child_v4`;
                }
            }
            else if(parent1type == "v2" && parent2type == "v2"){
                let randomnr1 = RNr(1, 4);
                if(randomnr1 == 4){
                    return `child_v1`;
                }
                else{
                    return `child_v2`;
                }
            }
            else if(parent1type == parent2type){
                return `child_${parent1type}`;
            }
            else{
                //v1 and v5 are dominant over v2 and v4
                if((parent1type == "v1" && parent2type == "v2") || (parent2type == "v1" && parent1type == "v2")){
                    let randomnr2 = RNr(1, 4);
                    if(randomnr2 == 4){
                        return `child_v2`;
                    }
                    else{
                        return `child_v1`;
                    }
                }
                else if((parent1type == "v5" && parent2type == "v4") || (parent2type == "v5" && parent1type == "v4")){
                    let randomnr3 = RNr(1, 4);
                    if(randomnr3 == 4){
                        return `child_v4`;
                    }
                    else{
                        return `child_v5`;
                    }
                }
                //otherwise go between the types, or one of the two parents
                else if((parent1type == "v5" && parent2type == "v3") || (parent2type == "v5" && parent1type == "v3")){
                    let randomnr7 = RNr(1, 3);
                    if(randomnr7 == 1){
                        return `child_v5`;
                    }
                    else if(randomnr7 == 3){
                        return `child_v3`;
                    }
                    else{
                        return `child_v4`;
                    }
                }
                else if((parent1type == "v4" && parent2type == "v2") || (parent2type == "v4" && parent1type == "v2")){
                    let randomnr6 = RNr(1, 4);
                    if(randomnr6 == 1){
                        return `child_v4`;
                    }
                    else if(randomnr6 == 2){
                        return `child_v2`;
                    }
                    else if(randomnr6 == 3 || randomnr6 == 4){
                        return `child_v3`;
                    }
                }
                else if((parent1type == "v3" && parent2type == "v1") || (parent2type == "v3" && parent1type == "v1")){
                    let randomnr5 = RNr(1, 4);
                    if(randomnr5 == 1){
                        return `child_v3`;
                    }
                    else if(randomnr5 == 2){
                        return `child_v1`;
                    }
                    else if(randomnr5 == 3 || randomnr5 == 4){
                        return `child_v2`;
                    }
                }
                else if((parent1type == "v1" && parent2type == "v4") || (parent2type == "v1" && parent1type == "v4")){
                    let randomnr8 = RNr(1, 6);
                    if(randomnr8 == 1){
                        return `child_v1`;
                    }
                    else if(randomnr8 == 2 || randomnr8 == 5){
                        return `child_v2`;
                    }
                    else if(randomnr8 == 3 || randomnr8 == 6){
                        return `child_v3`;
                    }
                    else if(randomnr8 == 4){
                        return `child_v4`;
                    }
                }
                else if((parent1type == "v2" && parent2type == "v5") || (parent2type == "v2" && parent1type == "v5")){
                    let randomnr9 = RNr(1, 6);
                    if(randomnr9 == 1){
                        return `child_v2`;
                    }
                    else if(randomnr9 == 2 || randomnr9 == 5){
                        return `child_v3`;
                    }
                    else if(randomnr9 == 3 || randomnr9 == 6){
                        return `child_v4`;
                    }
                    else if(randomnr9 == 4){
                        return `child_v5`;
                    }
                }
                else if((parent1type == "v1" && parent2type == "v5") || (parent2type == "v1" && parent1type == "v5")){
                    let randomnr9 = RNr(1, 5);
                    if(randomnr9 == 1 || randomnr9 == 4){
                        return `child_v2`;
                    }
                    else if(randomnr9 == 2){
                        return `child_v3`;
                    }
                    else if(randomnr9 == 3 || randomnr9 == 5){
                        return `child_v4`;
                    }
                }
                //all other cases are 50/50
                else{
                    let randomnr4 = RNr(1, 2);
                    if(randomnr4 == 1){
                        return `child_${parent1type}`;
                    }
                    else{
                        return `child_${parent2type}`;
                    }
                }
            }
        }

        function determine_color_type(){
            newbodytype = "child_v1";
            parent1 = document.getElementById(slot1_filling);
            parent2 = document.getElementById(slot2_filling);

            let randomnr10 = RNr(1, 8);

            if(randomnr10 == 0){
                return parent1.style.backgroundColor;
            }
            else if(randomnr10 == 0){
                return parent2.style.backgroundColor;
            }
            else{
                let [r1, g1, b1] = parseColor(parent1.style.backgroundColor);
                let [r2, g2, b2] = parseColor(parent2.style.backgroundColor);

                let r = Math.round((r1 + r2) / 2);
                let g = Math.round((g1 + g2) / 2);
                let b = Math.round((b1 + b2) / 2);

                if((r1 == 0 && r2 == 1) || (r1 == 1 && r2 == 0)){r = 0};
                if((g1 == 0 && g2 == 1) || (g1 == 1 && g2 == 0)){g = 0};
                if((b1 == 0 && b2 == 1) || (b1 == 1 && b2 == 0)){b = 0};

                return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
            }
        }

        function parseColor(color) {
            let nums = color.match(/\d+/g).map(Number);
            return nums.slice(0, 3);
        }

        function toHex(value){
            return value.toString(16).padStart(2, "0").toUpperCase();
        }

        //gameloop time-variable:
        let time_unit = 1000;

        //gameloop:
        setInterval(gameloop, time_unit*2);

        //save slots:
        let saveslot1_content = "empty";
        let saveslot2_content = "empty";
        let saveslot3_content = "empty";
        let saveslot4_content = "empty";
        let saveslot5_content = "empty";
        let saveslot6_content = "empty";
        let saveslot7_content = "empty";
        let saveslot8_content = "empty";

        let saveslot1 = document.querySelector(".saved_slot1");
        let saveslot2 = document.querySelector(".saved_slot2");
        let saveslot3 = document.querySelector(".saved_slot3");
        let saveslot4 = document.querySelector(".saved_slot4");
        let saveslot5 = document.querySelector(".saved_slot5");
        let saveslot6 = document.querySelector(".saved_slot6");
        let saveslot7 = document.querySelector(".saved_slot7");
        let saveslot8 = document.querySelector(".saved_slot8");

        let current_saveslot = saveslot1;
        let saveslot_content = "empty";
        
        function save(save_slot_nr){
            current_saveslot = saveslot1;
            if(save_slot_nr == 1){
                current_saveslot = saveslot1;
                saveslot_content  = saveslot1_content;
            } else if(save_slot_nr == 2){
                current_saveslot = saveslot2;
                saveslot_content  = saveslot2_content;
            } else if(save_slot_nr == 3){
                current_saveslot = saveslot3;
                saveslot_content  = saveslot3_content;
            } else if(save_slot_nr == 4){
                current_saveslot = saveslot4;
                saveslot_content  = saveslot4_content;
            } else if(save_slot_nr == 5){
                current_saveslot = saveslot5;
                saveslot_content  = saveslot5_content;
            } else if(save_slot_nr == 6){
                current_saveslot = saveslot6;
                saveslot_content  = saveslot6_content;
            } else if(save_slot_nr == 7){
                current_saveslot = saveslot7;
                saveslot_content  = saveslot7_content;
            } else if(save_slot_nr == 8){
                current_saveslot = saveslot8;
                saveslot_content  = saveslot8_content;
            }

            if(saveslot_content == "empty"){
                if(saving == true){
                    current_saveslot.backgroundColor = "#505050";
                    document.querySelectorAll(".temp").forEach(item =>{
                        item.remove();
                    })
                    gameloop_active = true;
                    saving = false;
                }
                else{
                    gameloop_active = false;
                    saving = true;
                    for(let x = 0; x < slime_id_list.length; x++){
                        let slime = document.getElementById(slime_id_list[x]);
                        if(slime.classList.contains("adult_vB")){
                            let available = document.createElement("p");
                            available.classList.add("temp");
                            available.textContent = "!";
                            available.style.fontSize = "5vh";
                            available.style.position = "absolute";
                            available.style.top = "-70%";//(slime.offsetTop - (0.10 * farm.offsetHeight)) + "px";
                            available.style.left = "43%";//(slime.offsetLeft + slime.offsetWidth * 0.45 - available.offsetWidth) + "px";
                            available.style.color = "#FFFFFF";
                            available.style.textShadow = "2px 0 #000000, -2px 0 #000000, 0 2px #000000, 0 -2px #000000, 1px 1px #000000, -1px -1px #000000, 1px -1px #000000, -1px 1px #000000";
                            available.style.zIndex = slime.style.zIndex;
                            available.id = `available_${slime.id}`;
                            slime.appendChild(available);
                        }
                    }
                    saveslot_content = "full";
                    if(save_slot_nr == 1){
                        saveslot1_content = "full";
                    } else if(save_slot_nr == 2){
                        saveslot2_content = "full"
                    } else if(save_slot_nr == 3){
                        saveslot3_content = "full"
                    } else if(save_slot_nr == 4){
                        saveslot4_content = "full"
                    } else if(save_slot_nr == 5){
                        saveslot5_content = "full"
                    } else if(save_slot_nr == 6){
                        saveslot6_content = "full"
                    } else if(save_slot_nr == 7){
                        saveslot7_content = "full"
                    } else if(save_slot_nr == 8){
                        saveslot8_content = "full"
                    }
                }
            }
            else{
                if(saving == true){
                    current_saveslot.backgroundColor = "#505050";
                    document.querySelectorAll(".temp").forEach(item =>{
                        item.remove();
                    })
                    gameloop_active = true;
                    saving = false;
                }
                else{
                    gameloop_active = false;
                    saving = true;
                    for(let x = 0; x < slime_id_list.length; x++){
                        let slime = document.getElementById(slime_id_list[x]);
                        if(slime.classList.contains("adult_vB")){
                            let available = document.createElement("p");
                            available.classList.add("temp");
                            available.textContent = "!";
                            available.style.fontSize = "5vh";
                            available.style.position = "absolute";
                            available.style.top = "-70%";//(slime.offsetTop - (0.10 * farm.offsetHeight)) + "px";
                            available.style.left = "43%";//(slime.offsetLeft + slime.offsetWidth * 0.45 - available.offsetWidth) + "px";
                            available.style.color = "#FFFFFF";
                            available.style.textShadow = "2px 0 #000000, -2px 0 #000000, 0 2px #000000, 0 -2px #000000, 1px 1px #000000, -1px -1px #000000, 1px -1px #000000, -1px 1px #000000";
                            available.style.zIndex = slime.style.zIndex;
                            available.id = `available_${slime.id}`;
                            slime.appendChild(available);
                        }
                    }
                    saveslot_content = "full";
                    if(save_slot_nr == 1){
                        saveslot1_content = "full";
                    } else if(save_slot_nr == 2){
                        saveslot2_content = "full"
                    } else if(save_slot_nr == 3){
                        saveslot3_content = "full"
                    } else if(save_slot_nr == 4){
                        saveslot4_content = "full"
                    } else if(save_slot_nr == 5){
                        saveslot5_content = "full"
                    } else if(save_slot_nr == 6){
                        saveslot6_content = "full"
                    } else if(save_slot_nr == 7){
                        saveslot7_content = "full"
                    } else if(save_slot_nr == 8){
                        saveslot8_content = "full"
                    }
                }
            }
        }

        function save_slime(slime, saveslot_content){
            current_saveslot.style.backgroundColor = slime.style.backgroundColor;
            document.querySelectorAll(".temp").forEach(item =>{
                item.remove();
            })
            
            current_saveslot.replaceChildren();

            let shape = document.createElement("div");
            shape.style.position = "relative";
            //shape.style.width = "80%";
            shape.style.height = "80%";
            shape.style.aspectRatio = "1/1";
            //shape.style.left = "6%";
            shape.style.top = "6.5%";
            shape.style.backgroundColor = "transparent";
            shape.style.border = "2px solid " + "#C8C8C8"; //( ( () => { let c = getComputedStyle(current_saveslot).backgroundColor.match(/\d+/g); return 0.299*c[0]+0.587*c[1]+0.114*c[2] < 200 ? '#FFFFFF' : '#C8C8C8'; })() );
            shape.style.borderTopLeftRadius = getComputedStyle(slime).borderTopLeftRadius;
            shape.style.borderTopRightRadius = getComputedStyle(slime).borderTopRightRadius;
            shape.style.borderBottomLeftRadius = getComputedStyle(slime).borderBottomLeftRadius;
            shape.style.borderBottomRightRadius = getComputedStyle(slime).borderBottomRightRadius;
            current_saveslot.appendChild(shape);

            saving = false;
            setTimeout(() => {gameloop_active = true;}, 50);
        }

        function spawn(slot, content){
            if(!(content == "empty")){
                let shape = slot.firstElementChild;
                let body_type = "adult_v1";
                if(shape.style.borderTopLeftRadius == "50%"){
                    if(shape.style.borderBottomLeftRadius == "25%"){
                        body_type = "adult_v4";
                    }
                    else{
                        body_type = "adult_v5";
                    }
                }
                else if(shape.style.borderTopLeftRadius == "25%"){
                    body_type = "adult_v3";
                }
                else if(shape.style.borderTopLeftRadius == "12.5%"){
                    body_type = "adult_v2";
                }
                else{
                    body_type = "adult_v1";
                }
                let color = slot.style.backgroundColor;
                add_slime(true, body_type, color, "", "");
            }
        }

        //missions:
        let current_mission_color_name = Object.keys(color_dict)[RNr(0, 7)];
        let current_mission_color = color_dict[current_mission_color_name];
        let current_mission_shape = "any shape";

        document.querySelector(".mission").innerHTML = `Next mission:<br>${current_mission_shape}, ${current_mission_color_name} (${current_mission_color})`;

        let goal_slot = document.querySelector(".goal_slot");
        let missioning = false;
        goal_slot.addEventListener("click", () => {
            if(!missioning){
                gameloop_active = false;
                missioning = true;
                for(let x = 0; x < slime_id_list.length; x++){
                    let slime = document.getElementById(slime_id_list[x]);
                    if(slime.classList.contains("adult_vB")){
                        let available = document.createElement("p");
                        available.classList.add("temp");
                        available.textContent = "!";
                        available.style.fontSize = "5vh";
                        available.style.position = "absolute";
                        available.style.top = "-70%";//(slime.offsetTop - (0.10 * farm.offsetHeight)) + "px";
                        available.style.left = "43%";//(slime.offsetLeft + slime.offsetWidth * 0.45 - available.offsetWidth) + "px";
                        available.style.color = "#FFFFFF";
                        available.style.textShadow = "2px 0 #000000, -2px 0 #000000, 0 2px #000000, 0 -2px #000000, 1px 1px #000000, -1px -1px #000000, 1px -1px #000000, -1px 1px #000000";
                        available.style.zIndex = slime.style.zIndex;
                        available.id = `available_${slime.id}`;
                        slime.appendChild(available);
                    }
                }
            }
            else{
                if(goal_slot.firstElementChild != null){
                    let slime = goal_slot.firstElementChild;
                    farm.appendChild(slime);
                    slime.style.top = "";
                    slime.style.bottom = "0%";
                    slime.style.width = "";
                    slime.style.height = "15%";
                    slime.style.aspectRatio = "1/1";
                }
                missioning = false;

                document.querySelectorAll(".temp").forEach(item =>{
                    item.remove();
                });

                setTimeout(() => {gameloop_active = true;}, 50);
            }
        })

        function enterslime(slime){
            document.querySelectorAll(".temp").forEach(item =>{
                if(item.id == `available_${slime.id}`){
                    item.remove();
                }
            });
            slime.style.width = "100%";
            slime.style.height = "100%";
            slime.style.top = "-1%";
            slime.style.left = "-1%";
            goal_slot.appendChild(slime);

            check();
        }

        function check(){
            let succes = false;
            let [a, b, c] = parseColor(goal_slot.firstElementChild.style.backgroundColor);
            let colory = `#${toHex(a)}${toHex(b)}${toHex(c)}`

            let shapy = "cube";

            if(mission_level == 0 || mission_level == 10){shapy = "any shape"}
            else{
                if(goal_slot.firstElementChild.classList.contains("adult_v5")){shapy = "circle"}
                else if(goal_slot.firstElementChild.classList.contains("adult_v4")){shapy = "droplet"}
                else if(goal_slot.firstElementChild.classList.contains("adult_v3")){shapy = "squircle"}
                else if(goal_slot.firstElementChild.classList.contains("adult_v2")){shapy = "rounded square"}
                else if(goal_slot.firstElementChild.classList.contains("adult_v1")){shapy = "cube"}
            }

            if(colory == current_mission_color && shapy == current_mission_shape){
                goal_slot.firstElementChild.animate([{opacity:1},{opacity:0}],{duration:1000,fill:"forwards"}).onfinish=()=>delete_slime(goal_slot.firstElementChild.id);
                setTimeout(() => {document.querySelector(".succes").classList.remove("hidden"),document.querySelector(".succes").animate([{opacity:0},{opacity:1}],{duration:1000,fill:"forwards"});}, 1000);
                setTimeout(() => {document.querySelector(".succes").classList.add("hidden");}, 3000);
                newmission();
            }

            let temp_color = "#000000";
            setTimeout(() => {
                if(goal_slot.firstElementChild != null){
                    temp_color = goal_slot.firstElementChild.style.backgroundColor;
                    goal_slot.firstElementChild.style.backgroundColor = "#C00000";
                    goal_slot.firstElementChild.animate([{transform:"translateX(-10px)"},{transform:"translateX(10px)"},{transform:"translateX(-10px)"},{transform:"translateX(10px)"},{transform:"translateX(0)"}],{duration:300});
                }
            }, 1000);
            if(goal_slot.firstElementChild != null){
                setTimeout(() => {gameloop_active = true;}, 3000);
            }
            else{
                setTimeout(() => {gameloop_active = true;}, 50);
            }
            setTimeout(() => {
                if(goal_slot.firstElementChild != null){
                    goal_slot.firstElementChild.style.backgroundColor = temp_color;
                    let slime = goal_slot.firstElementChild;
                    farm.appendChild(slime);
                    slime.style.top = "";
                    slime.style.bottom = "0%";
                    slime.style.width = "";
                    slime.style.height = "15%";
                    slime.style.aspectRatio = "1/1";
                    slime.style.left = (RNr(0, 900)/10).toString() + "%";
                }
            }, 2000);
            
            missioning = false;

            document.querySelectorAll(".temp").forEach(item =>{
                item.remove();
            });
        }

        function newmission(){
            if(mission_level == 0 || mission_level == 10){
                current_mission_shape = "any shape";
            }
            else{
                current_mission_shape = RNr(1, 5);
                if(current_mission_shape == 1){current_mission_shape = "cube"}
                else if(current_mission_shape == 2){current_mission_shape = "rounded square"}
                else if(current_mission_shape == 3){current_mission_shape = "squircle"}
                else if(current_mission_shape == 4){current_mission_shape = "droplet"}
                else if(current_mission_shape == 5){current_mission_shape = "circle"}
            }
            //mission_level += 1;
            if(mission_level < 10){
                current_mission_color_name = Object.keys(color_dict)[RNr(0, 7)];
                current_mission_color = color_dict[current_mission_color_name];

                document.querySelector(".mission").innerHTML = `Next mission:<br>${current_mission_shape}, ${current_mission_color_name} (${current_mission_color})`;
            }
            else if(mission_level < 20){
                current_mission_color_name = Object.keys(color_dict)[RNr(8, 26)];
                current_mission_color = color_dict[current_mission_color_name];

                document.querySelector(".mission").innerHTML = `Next mission:<br>${current_mission_shape}, ${current_mission_color_name} (${current_mission_color})`;
            }
            else if(mission_level < 30){
                current_mission_color_name = Object.keys(color_dict)[RNr(27, (Object.keys(color_dict).length-1))];
                current_mission_color = color_dict[current_mission_color_name];

                document.querySelector(".mission").innerHTML = `Next mission:<br>${current_mission_shape}, ${current_mission_color_name} (${current_mission_color})`;
            }
            else{
                current_mission_color_name = "random color";
                [a, b, c] = [RNr(0, 255), RNr(0, 255), RNr(0, 255)];
                current_mission_color = `#${toHex(a)}${toHex(b)}${toHex(c)}`;
                document.querySelector(".mission").innerHTML = `Next mission:<br>${current_mission_shape}, ${current_mission_color}`;
            }
        }

        function setdifficulty(difficulty){
            console.log("hi");
            document.querySelectorAll(".dif").forEach(item => {
                console.log(item);
                item.style.color = "#808080";
            })
            document.querySelectorAll(".dif")[difficulty-1].style.color = "#FFFFFF";

            current_mission_color_name = Object.keys(color_dict)[RNr(0, 7)];
            current_mission_color = color_dict[current_mission_color_name];
            current_mission_shape = "cube";
            if(difficulty == 1){mission_level = 0;}
            if(difficulty == 2){mission_level = 10;}
            if(difficulty == 3){mission_level = 20;}
            if(difficulty == 4){mission_level = 60;}
            newmission();
        }

        function remove_saved(){
            saveslot1_content = "empty";
            saveslot2_content = "empty";
            saveslot3_content = "empty";
            saveslot4_content = "empty";
            saveslot5_content = "empty";
            saveslot6_content = "empty";
            saveslot7_content = "empty";
            saveslot8_content = "empty";
            document.querySelector(".saved_slot1").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot2").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot3").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot4").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot5").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot6").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot7").style.backgroundColor = "#505050";
            document.querySelector(".saved_slot8").style.backgroundColor = "#505050";
            if(document.querySelector(".saved_slot1").firstElementChild != null){document.querySelector(".saved_slot1").firstElementChild.remove();};
            if(document.querySelector(".saved_slot2").firstElementChild != null){document.querySelector(".saved_slot2").firstElementChild.remove();};
            if(document.querySelector(".saved_slot3").firstElementChild != null){document.querySelector(".saved_slot3").firstElementChild.remove();};
            if(document.querySelector(".saved_slot4").firstElementChild != null){document.querySelector(".saved_slot4").firstElementChild.remove();};
            if(document.querySelector(".saved_slot5").firstElementChild != null){document.querySelector(".saved_slot5").firstElementChild.remove();};
            if(document.querySelector(".saved_slot6").firstElementChild != null){document.querySelector(".saved_slot6").firstElementChild.remove();};
            if(document.querySelector(".saved_slot7").firstElementChild != null){document.querySelector(".saved_slot7").firstElementChild.remove();};
            if(document.querySelector(".saved_slot8").firstElementChild != null){document.querySelector(".saved_slot8").firstElementChild.remove();};
        }
    </script>
  </body>
</html>